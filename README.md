## EffectorFisher-core Module (Python Library)

The EffectorFisher module is a Python library used for analyzing effector proteins to identify strong effector candidates. It focuses on inferring S-gene interactions or associations between candidate effector genes and host cultivars, which are identified via disease phenotyping panels. The module also takes into account other effector-like characteristics to refine the candidate list.

### Input Files
To run this module, you need to provide the following input files:

1.  `Effector_variants_PAV_output.txt`: This file contains the presence–absence variation (PAV) matrix of predicted effector candidates across isolates, as generated by the **EffectorFisher** module. The file can be found in the `Final_PAV_result` directory upon successful execution of the EffectorFisher pipeline. Detailed instructions for generating this file can be found in the "EffectorFisher" repo: https://github.com/muhitulh/EffectorFisher/tree/main. Note: Both the EffectorFisher and EffectorFisher-core modules are components of the associated manuscript.
    
2.  `phenotype_data_quantitative.txt`  or  `phenotype_data_qualitative.txt`:
    
    -   `phenotype_data_quantitative.txt`: This file should contain numeric disease scores. You need to prepare this file as shown in the example.
    -   `phenotype_data_qualitative.txt`: This file should contain disease severity levels (high or low). You need to prepare this file as shown in the example.
3.  `predector_results.txt`: This file is a required input for **EffectorFisher-core** and must be generated by running the **Predector** tool. Predector is a published tool in _Scientific Reports_ ([link](https://www.nature.com/articles/s41598-021-99363-0)) that prioritizes candidate effector proteins based on a range of effector-like features.  
Installation and usage instructions are available in the [Predector GitHub repository](https://github.com/ccdmb/predector).

4. `known_effector.txt` (optional): You can provide known effector IDs and names in this file, as shown in the example. If this file is not provided, the module will not include known effector ranking in the final output.

**Important:** Make sure your input file names are the same as mentioned above and that they are located in the subdirectory `00_input_files` within your working directory. Alternatively, you can provide the input file paths as command-line arguments (note: still working on it).

### Directory Structure
Here's an example of the directory structure for running the EffectorFisher module:

```plaintext
working_directory/
├── 00_input_files/
│   ├── Effector_variants_PAV_output.txt
│   ├── phenotype_data_quantitative.txt (or phenotype_data_qualitative.txt)
│   ├── predector_results.txt
│   └── known_effector.txt (optional)
├── effectorfisher_module.py
└── ...
```

Make sure to place the input files in the `00_input_files` directory within your working directory. The `effector_fisher_module.py` file should be located in the root of your working directory.

### Usage
To run the EffectorFisher module, execute the following command:

```
python effectorfisher_pipeline.py --data_type <data_type> [options]
```

### Options

**Must include:**
- `--data_type <data_type>`: Specify the type of phenotypic data you have. Choose either `qualitative` or `quantitative`. See the examples in the `input_files` directory.

**Important:**
- `--min_iso <number>`: Specify the minimum isoform number (default = 5).

**Optional:**
- `--cyst <number>`: Specify the cysteine count threshold (default = 2).
- `--pred_score <number>`: Specify the prediction score threshold (default = 2).
- `--total_aa <number>`: Specify the total amino acid count threshold (default = 300).
- `--p_value <number>`: Specify the p-value threshold (default = 0.05).

### Example
```
python effectorfisher_pipeline.py --data_type quantitative --min_iso 5 --cyst 2 --pred_score 2 --total_aa 300 --p_value 0.05
```
## Output

### Main Output
| File Name                  | Description                                         |
|----------------------------|-----------------------------------------------------|
| `complete_isoform_list.txt` | Complete list of isoforms processed by the module. |
| `complete_loci_list.txt`    | Complete list of loci processed by the module.     |

### Additional Output
| File Name                      | Description                                                                                                                                                         |
|--------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `filtered_loci_list.txt`       | List of loci based on the default or specified filters. Alternatively, you can apply filters to `complete_locus_list.txt` as required.                              |
| `known_effectors_ranking.txt` | Contains the ranking of known effectors if you provide a known effector input file.                                                                                 |



Step 14 (Additional Result): Rank the known effectors after filtering.
